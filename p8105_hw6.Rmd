---
title: "p8105_hw6"
author: "Yiying Chen yc4776"
date: "2025-12-02"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r problem_1_data_clean, warning = FALSE, message = FALSE}
library(tidyverse)
homicide_data = read.csv("data/homicide-data.csv")

homicide_data_clean = homicide_data |>
  mutate(city_state = paste(city, state, sep = ", "),
         binary_open = case_when(
      disposition == "Open/No arrest"  ~ 0,
      disposition != "Open/No arrest" ~ 1),
      victim_age = as.numeric(victim_age)) |>
  filter(!city_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL"))|>
  filter(victim_race %in% c("White","Black"))
```

```{r problem_1_Baltimore}
library(broom)

baltimore_data = homicide_data_clean |>
  filter(city_state == "Baltimore, MD")

set.seed(123)
baltimore_fit = glm(
    binary_open ~ victim_age + victim_sex + victim_race,
    data   = baltimore_data
  )

baltimore_tidy = 
  tidy(
    baltimore_fit,
    exponentiate = TRUE,  
    conf.int     = TRUE  
  )

baltimore_tidy = 
  baltimore_tidy |>
  select(term, estimate, conf.low, conf.high)

baltimore_tidy
```
